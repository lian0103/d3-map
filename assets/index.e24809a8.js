import{r as j,c as W,w as L,n as U,o as B,d as N,e as C,f as m,h as P,i as Y,u as O,t as F,j as q,F as J,k as R}from"./js/@vue-acea3cb5.js";import"./js/d3-transition-9b9601cc.js";import{z as H,i as z,t as K}from"./js/d3-zoom-913a648a.js";import{f as E,m as A}from"./js/topojson-client-c4a222b2.js";import{e as Q,s as T,p as X}from"./js/d3-selection-21dd2f12.js";import{e as V,i as G}from"./js/d3-304b5dc1.js";import{u as Z}from"./js/@vueuse-4a213872.js";import"./js/d3-dispatch-937b4995.js";import"./js/d3-timer-c43de4ad.js";import"./js/d3-interpolate-7dfde7b4.js";import"./js/d3-color-9ef60408.js";import"./js/d3-ease-b1f6982c.js";import"./js/d3-drag-92a78bad.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&e(p)}).observe(document,{childList:!0,subtree:!0});function f(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(t){if(t.ep)return;t.ep=!0;const n=f(t);fetch(t.href,n)}})();const tt={class:"taiwan-wrapper"},et=m("svg",{id:"theSVG"},null,-1),rt=[et],nt={__name:"TaiwanMap",props:{width:{type:Number,default:()=>window.innerWidth},height:{type:Number,default:()=>window.innerHeight}},emits:["change"],setup(b,{expose:a,emit:f}){const e=b,t=j(),n=j();var p=null;const k=W(()=>e.width.value<420);var u=null,i=null;L(()=>n.value,o=>{f("change",o)});var l=null;const $=o=>{if(!o)return!1;let c=JSON.parse(JSON.stringify(p));c.objects.TOWN_MOI_1111118.geometries=c.objects.TOWN_MOI_1111118.geometries.filter(_=>_.properties.COUNTYCODE===o),l=i.append("g").attr("id","countrySVG");const h=V().scale(11e3).center(k?[121,24]:[122,24.5]).translate([e.width/2,e.height/2]),y=G().projection(h);l.append("path").attr("fill","none").attr("stroke","white").attr("stroke-linejoin","round").attr("d",y(A(c,c.objects.TOWN_MOI_1111118,(_,g)=>_!==g))),l.append("g").attr("fill","#72cbcc6f").attr("cursor","pointer").selectAll("path").data(E(c,c.objects.TOWN_MOI_1111118).features).join("path").attr("d",y)},S=()=>{i=T("#theSVG").attr("viewBox",[0,0,e.width,e.height]).attr("width",e.width).attr("height",e.height);const o=i.append("g"),c=V().scale(11e3).center(k?[121,24]:[122,24.5]).translate([e.width/2,e.height/2]),h=G().projection(c);function y(s,r){T("#countrySVG").remove(),n.value=r,$(r.properties.COUNTYCODE);const x=this||`#path-${r.properties.COUNTYCODE}`,[[M,d],[v,w]]=h.bounds(r);s.stopPropagation(),t.value.transition().style("fill",null),U(()=>{T(x).transition().style("fill","#72cbcc"),i.transition().duration(750).call(g.transform,z.translate(e.width/2,e.height/2).scale(Math.min(8,.9/Math.max((v-M)/e.width,(w-d)/e.height))).translate(-(M+v)/2,-(d+w)/2),X(s,i.node()))})}u=()=>{T("#countrySVG").remove(),t.value.transition().style("fill",null),n.value=null,i.transition().duration(750).call(g.transform,z,K(i.node()).invert([e.width/2,e.height/2]))};function _(s){const{transform:r}=s;o.attr("transform",r),o.attr("stroke-width",1/r.k),l&&(l.attr("transform",r),l.attr("stroke-width",1/r.k))}const g=H().scaleExtent([1,8]).on("zoom",_),D={10017:{x:10,y:-10},63e3:{x:-10,y:-45},65e3:{x:-25,y:20},68e3:{x:-15,y:-15},10004:{x:-15,y:0},10018:{x:-35,y:0},10005:{x:-15,y:5},66e3:{x:-45,y:5},10007:{x:-10,y:5},10009:{x:-25,y:0},10020:{x:15,y:0},10016:{x:-25,y:-40},"09020":{x:0,y:-40},67e3:{x:-20,y:0},10010:{x:-65,y:0},64e3:{x:-10,y:0},10013:{x:-10,y:-20},10014:{x:-30,y:-30},10008:{x:-15,y:5},10002:{x:0,y:15}};fetch("./COUNTY_MOI_topo.json").then(s=>s.json()).then(s=>{t.value=o.append("g").attr("fill","#666").attr("cursor","pointer").selectAll("path").data(E(s,s.objects.COUNTY_MOI_1090820).features).join("path").attr("id",r=>"path-"+r.properties.COUNTYCODE).on("click",y).attr("d",h),o.append("path").attr("fill","none").attr("stroke","white").attr("stroke-linejoin","round").attr("d",h(A(s,s.objects.COUNTY_MOI_1090820,(r,x)=>r!==x))),E(s,s.objects.COUNTY_MOI_1090820).features.forEach(r=>{let{x=0,y:M=0}=D[r.properties.COUNTYCODE]||{};o.append("text").attr("class","countryText").attr("x",()=>{const[[d,v],[w,I]]=h.bounds(r);return(d+w)/2+x}).attr("y",()=>{const[[d,v],[w,I]]=h.bounds(r);return(v+I)/2+M}).text(()=>r.properties.COUNTYNAME).on("click",d=>{y(d,r)})}),i.on("click",u),i.call(g)})};return a({reset:()=>{u&&u()},render:()=>{S&&(Q("#theSVG > *").remove(),U(()=>{S()}))}}),B(()=>{S(),fetch("./TOWN_MOI_topo.json").then(o=>o.json()).then(o=>{p=o})}),(o,c)=>(N(),C("div",tt,rt))}};const ot=m("div",{class:"navBar"},null,-1),st={class:"box"},it={class:"inner"},at=m("i",{class:"fas fa-times"},null,-1),lt=[at],ct={key:0},pt={key:1},ut={__name:"App",setup(b){const{width:a,height:f}=Z(),e=j(),t=j(null),n=W(()=>a.value<420),p=u=>{t.value=u},k=()=>{t.value=null,e.value.reset()};return window.addEventListener("resize",()=>{e.value.render()}),(u,i)=>{var l;return N(),C(J,null,[ot,m("div",st,[P(nt,{ref_key:"taiwanMapRef",ref:e,class:"taiwanMap",style:Y({height:O(a)}),height:O(f)-100,width:O(a),onChange:p},null,8,["style","height","width"]),!O(n)||t.value?(N(),C("div",{key:0,class:"info",style:Y({height:`${O(f)-100}px`})},[m("div",it,[m("div",{class:"closeIcon",onClick:k},lt),t.value?(N(),C("h2",ct,F((l=t.value)==null?void 0:l.properties.COUNTYNAME),1)):(N(),C("h2",pt,"\u6982\u6CC1"))])],4)):q("",!0)])],64)}}};R(ut).mount("#app");
