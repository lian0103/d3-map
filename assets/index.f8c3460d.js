import{r as O,c as z,w as A,n as $,o as I,d as g,e as v,f as d,h as L,i as b,u as x,t as V,j as B,F as P,k as D}from"./js/@vue-acea3cb5.js";import"./js/d3-transition-9b9601cc.js";import{i as T,t as F,z as G}from"./js/d3-zoom-913a648a.js";import{f as S,m as q}from"./js/topojson-client-c4a222b2.js";import{e as R,s as j,p as W}from"./js/d3-selection-21dd2f12.js";import{e as H,i as K}from"./js/d3-304b5dc1.js";import{u as J}from"./js/@vueuse-4a213872.js";import"./js/d3-dispatch-937b4995.js";import"./js/d3-timer-c43de4ad.js";import"./js/d3-interpolate-7dfde7b4.js";import"./js/d3-color-9ef60408.js";import"./js/d3-ease-b1f6982c.js";import"./js/d3-drag-92a78bad.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function u(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(t){if(t.ep)return;t.ep=!0;const n=u(t);fetch(t.href,n)}})();const Q={class:"taiwan-wrapper"},X=d("svg",{id:"theSVG"},null,-1),Z=[X],tt={__name:"TaiwanMap",props:{width:{type:Number,default:()=>window.innerWidth},height:{type:Number,default:()=>window.innerHeight}},emits:["change"],setup(N,{expose:i,emit:u}){const e=N,t=O(),n=O(),l=z(()=>width.value<420);var p=null;A(()=>n.value,s=>{u("change",s)});const h=()=>{const s=j("#theSVG").attr("viewBox",[0,0,e.width,e.height]).attr("width",e.width).attr("height",e.height).on("click",p),a=s.append("g"),E=H().scale(11e3).center(l?[121,24]:[122,24.5]).translate([e.width/2,e.height/2]),f=K().projection(E);function C(r,o){n.value=o;const m=this||`#path-${o.properties.COUNTYCODE}`,[[w,c],[y,_]]=f.bounds(o);r.stopPropagation(),t.value.transition().style("fill",null),j(m).transition().style("fill","#72cbcc"),s.transition().duration(750).call(k.transform,T.translate(e.width/2,e.height/2).scale(Math.min(8,.9/Math.max((y-w)/e.width,(_-c)/e.height))).translate(-(w+y)/2,-(c+_)/2),W(r,s.node()))}p=()=>{t.value.transition().style("fill",null),n.value=null,s.transition().duration(750).call(k.transform,T,F(s.node()).invert([e.width/2,e.height/2]))};function U(r){const{transform:o}=r;a.attr("transform",o),a.attr("stroke-width",1/o.k)}const k=G().scaleExtent([1,8]).on("zoom",U),Y={10017:{x:10,y:-10},63e3:{x:-10,y:-45},65e3:{x:-25,y:20},68e3:{x:-15,y:-15},10004:{x:-15,y:0},10018:{x:-35,y:0},10005:{x:-15,y:5},66e3:{x:-45,y:5},10007:{x:-10,y:5},10009:{x:-25,y:0},10020:{x:15,y:0},10016:{x:-25,y:-40},"09020":{x:0,y:-40},67e3:{x:-20,y:0},10010:{x:-65,y:0},64e3:{x:-10,y:0},10013:{x:-10,y:-20},10014:{x:-30,y:-30},10008:{x:-15,y:5},10002:{x:0,y:15}};fetch("./COUNTY_MOI_topo.json").then(r=>r.json()).then(r=>{t.value=a.append("g").attr("fill","#666").attr("cursor","pointer").selectAll("path").data(S(r,r.objects.COUNTY_MOI_1090820).features).join("path").attr("id",o=>"path-"+o.properties.COUNTYCODE).on("click",C).attr("d",f),a.append("path").attr("fill","none").attr("stroke","white").attr("stroke-linejoin","round").attr("d",f(q(r,r.objects.COUNTY_MOI_1090820,(o,m)=>o!==m))),S(r,r.objects.COUNTY_MOI_1090820).features.forEach(o=>{let{x:m=0,y:w=0}=Y[o.properties.COUNTYCODE]||{};a.append("text").attr("class","countryText").attr("x",()=>{const[[c,y],[_,M]]=f.bounds(o);return(c+_)/2+m}).attr("y",()=>{const[[c,y],[_,M]]=f.bounds(o);return(y+M)/2+w}).text(()=>o.properties.COUNTYNAME).on("click",c=>{C(c,o)})}),s.call(k)})};return i({reset:()=>{p&&p()},render:()=>{h&&(R("#theSVG > *").remove(),$(()=>{h()}))}}),I(()=>{h()}),(s,a)=>(g(),v("div",Q,Z))}};const et=d("div",{class:"navBar"},null,-1),nt={class:"box"},ot={class:"inner"},rt=d("i",{class:"fas fa-times"},null,-1),st=[rt],it={key:0},at={key:1},lt={__name:"App",setup(N){const{width:i,height:u}=J(),e=O(),t=O(null),n=z(()=>i.value<420),l=h=>{t.value=h},p=()=>{t.value=null,e.value.reset()};return window.addEventListener("resize",()=>{e.value.render()}),(h,s)=>{var a;return g(),v(P,null,[et,d("div",nt,[L(tt,{ref_key:"taiwanMapRef",ref:e,class:"taiwanMap",style:b({height:x(i)}),height:x(u)-100,width:x(i),onChange:l},null,8,["style","height","width"]),!x(n)||t.value?(g(),v("div",{key:0,class:"info",style:b({height:`${x(u)-100}px`})},[d("div",ot,[d("div",{class:"closeIcon",onClick:p},st),t.value?(g(),v("h2",it,V((a=t.value)==null?void 0:a.properties.COUNTYNAME),1)):(g(),v("h2",at,"\u6982\u6CC1"))])],4)):B("",!0)])],64)}}};D(lt).mount("#app");
